"use strict";function placeholders(){const e=document.querySelectorAll(".input"),t=document.querySelectorAll(".textarea");e&&e.forEach(e=>{e.addEventListener("focus",(function(t){e.setAttribute("placeholder","")}));const t=e.placeholder;e.addEventListener("blur",(function(r){e.setAttribute("placeholder",t)}))}),t&&t.forEach(e=>{e.addEventListener("focus",(function(t){e.setAttribute("placeholder","")}));const t=e.placeholder;e.addEventListener("blur",(function(r){e.setAttribute("placeholder",t)}))})}function mask(){const e=document.querySelectorAll(".form");if(!e)return!1;e.forEach(e=>{document.querySelectorAll("[name]").forEach(e=>{e.addEventListener("input",t=>{let r=e.getAttribute("name");if("form[tel]"===r){let e=t.target.value.replace(/\D/g,"").match(/(\d{0,3})(\d{0,3})(\d{0,4})/);t.target.value=e[2]?"("+e[1]+") "+e[2]+(e[3]?"-"+e[3]:""):e[1]}if("form[name]"===r&&(t.target.value=t.target.value.replace(/[0-9]/g,"")),"form[email]"!==r)return!1})})})}const validate=()=>{document.querySelectorAll(".form").forEach(e=>{e.addEventListener("submit",e=>{if(e.target){e.preventDefault();const t=e.target;if(!e.target.classList.contains("error")){document.querySelectorAll("[name]").forEach((e,r,o)=>{""==e.value&&(t.classList.add("error"),setTimeout(()=>{t.classList.remove("error")},3e3));const l=e.getAttribute("name"),a=()=>{e.insertAdjacentHTML("beforebegin",'<div class="invalid">Поле пустое</div>'),e.parentNode.style.border="1px solid red",setTimeout(()=>{e.previousSibling.remove(),e.parentNode.style.border=""},3e3)};e.parentNode.style.border="2px solid green";if("form[name]"===l&&(""!==e.value&&null!==e.value||a(),""===!e.value||e.value),"form[tel]"===l&&(e.value.length<=9&&a(),e.value.length),!t.classList.contains("error")&&""!==o){const t=e.value;console.log(t)}})}}})})};function testWebP(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}testWebP((function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")})),window.addEventListener("DOMContentLoaded",()=>{placeholders(),mask(),document.querySelectorAll(".form").forEach(e=>{e.addEventListener("submit",e=>{if(e.target){e.preventDefault();const t=e.target;e.target.classList.contains("error")||document.querySelectorAll("[name]").forEach((e,r,o)=>{""==e.value&&(t.classList.add("error"),setTimeout(()=>{t.classList.remove("error")},3e3));const l=e.getAttribute("name"),a=()=>{e.insertAdjacentHTML("beforebegin",'<div class="invalid">Поле пустое</div>'),e.parentNode.style.border="1px solid red",setTimeout(()=>{e.previousSibling.remove(),e.parentNode.style.border=""},3e3)};if(e.parentNode.style.border="2px solid green","form[name]"===l&&(""!==e.value&&null!==e.value||a(),""===!e.value||e.value),"form[tel]"===l&&(e.value.length<=9&&a(),e.value.length),!t.classList.contains("error")&&""!==o){const t=e.value;console.log(t)}})}})})});